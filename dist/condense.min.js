!function(t,e){"use strict";"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.jabiru=e(t)}(this,function(){"use strict";var t="jabiru",e=0,n=function(n,o){function i(t){window[r]=t=null,a.parentNode.removeChild(a)}var a=document.createElement("script"),r=t+e;e++,window[r]=function(t){"function"==typeof o?o(t):console.error("You must specify a method as a callback")},a.onload=a.onreadystatechange=function(t){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a&&(a.onreadystatechange=null),i(t))},a.src=n+"&callback="+r,document.head.appendChild(a)};return{get:n}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.Condense=e(t)}(this,function(){"use strict";var t=["en","ru","it","es","sp","uk","ua","de","pt","ro","pl","fi","nl","fr","bg","sv","se","zh_tw","zh","zh_cn","tr","ca"],e=["N","NE","E","SE","S","SW","W","NW"],n=["metric","imperial"],o="http://api.openweathermap.org/data/2.5/weather?",i="img/",a=".png",r=function(){this.rawData=null,this.isSet=!1};r.prototype={set:function(t,e){var n=this;return n.isSet?void console.error("The widget is already set"):t?(n.element=t,n.onload=e,n.get(),void 0):void console.error("You must specify an HTML Element to build the widget")},get:function(){var t,e,n,i=this,a=i.element,r=a.getAttribute("data-condense-location"),s=a.getAttribute("data-condense-latitude"),l=a.getAttribute("data-condense-longitude"),f=a.getAttribute("data-condense-language"),h=a.getAttribute("data-condense-units");s&&l&&(r={lat:s,lon:l}),t=u(r),e=d(f),n=c(h),r?(i.url=o+t+e+n,i.request()):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){i.url=o+"&lat="+t.coords.latitude+"&lon="+t.coords.longitude+e+n,i.request()})},request:function(){var t=this,e=encodeURI(t.url);jabiru.get(e,function(e){t.isSet=!0,t.rawData=e,t.insertData()})},insertData:function(){var t=this.rawData,e=this.element,n=this.onload;t=l(t);for(var o in t.data){var i="[data-condense-"+o+"]",a=e.querySelector(i);a&&(a.innerHTML=t.data[o])}var r=e.querySelector("[data-condense-icon]");n&&(r?r.onload=n:n()),r&&(r.src=t.imageSrc),this.rawData=null}};var u=function(t){return t&&"object"==typeof t?"&lat="+t.lat+"&lon="+t.lon:t?"&q="+t:void 0},d=function(e){return e&&-1!==t.indexOf(e)?"&lang="+e:"&lang=en"},c=function(t){return t&&-1!==n.indexOf(t)?"&units="+t:""},s=function(t){var n=Math.round(t/45);return e[n]||"N"},l=function(t){if(200===t.cod)return{data:{temperature:Math.round(t.main.temp),min:Math.round(t.main.temp_min),max:Math.round(t.main.temp_max),pressure:t.main.pressure,humidity:t.main.humidity,city:t.name,country:t.sys.country,description:t.weather[0].description,code:t.weather[0].id,windSpeed:t.wind.speed,windDirection:s(t.wind.deg)},imageSrc:i+t.weather[0].icon+a};throw"The place you request could not be found"};return r});